{
  "markup" : "%3Cwm-prefab-container+name%3D%22page1%22%3E++%0A++++%3Cwm-button+on-click%3D%22signInButtonClick%28%24event%2C+widget%29%22+caption%3D%22bind%3Abuttoncaption%22+type%3D%22button%22+name%3D%22signInButton%22+iconclass%3D%22fa+fa-google%22+show%3D%22true%22+class%3D%22btn+google-login-btn%22+conditionalclass%3D%22bind%3Abuttonclass%22%3E%3C%2Fwm-button%3E++%0A%3C%2Fwm-prefab-container%3E",
  "script" : "var+LOGIN_MODE+%3D+%7B%0A++++++++%27AUTOMATIC%27%3A+%22auto%22%0A++++%7D%2C%0A++++autoLogin+%3D+Prefab.loginmode+%3D%3D%3D+LOGIN_MODE.AUTOMATIC%3B%0APrefab.isInsideIframe+%3D+window.self+%21%3D+window.top%3B%0A%2F*%0A+*+This+function+will+be+invoked+when+any+of+this+prefab%27s+property+is+changed%0A+*+%40key%3A+property+name%0A+*+%40newVal%3A+new+value+of+the+property%0A+*+%40oldVal%3A+old+value+of+the+property%0A+*%2F%0A%0Afunction+propertyChangeHandler%28key%2C+newVal%2C+oldVal%29+%7B%0A++++%2F*%0A+++++++++++++++switch+%28key%29+%7B%0A+++++++++++++++case+%22prop1%22%3A%0A+++++++++++++++%2F%2F+do+something+with+newVal+for+property+%27prop1%27%0A+++++++++++++++break%3B%0A+++++++++++++++case+%22prop2%22%3A%0A+++++++++++++++%2F%2F+do+something+with+newVal+for+property+%27prop2%27%0A+++++++++++++++break%3B%0A+++++++++++++++%7D%0A+++++++++++++++*%2F%0A%0A%7D%0A%2F*+register+the+property+change+handler+*%2F%0A%0APrefab.onPropertyChange+%3D+propertyChangeHandler%3B%0A%0Afunction+toggleSignInButton%28enable%29+%7B%0A++++var+signInBtn+%3D+Prefab.Widgets.signInButton.%24element%3B%0A++++if+%28%21enable%29+%7B%0A++++++++signInBtn.attr%28%27disabled%27%2C+%27disabled%27%29%3B%0A++++%7D+else+%7B%0A++++++++signInBtn.removeAttr%28%27disabled%27%29%3B%0A++++%7D%0A%7D%0A%0Afunction+openWindow%28href%29+%7B%0A++++if+%28%21href%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++window.open%28href%2C+Prefab.isInsideIframe+%3F+%27_blank%27+%3A+%27_self%27%2C+%22width%3D600%2Cheight%3D700%22%29%3B%0A%7D%0APrefab.OAuthHandlerServiceGetLoginURLonSuccess+%3D+function%28variable%2C+data%29+%7B%0A++++Prefab.loginurl+%3D+data+%26%26+data.value+%3F+data.value+%3A+%27%27%3B%0A++++Prefab.onLoginurlfetch%28null%2C+%7B%0A++++++++%27loginurl%27%3A+Prefab.loginurl%0A++++%7D%29%3B%0A++++toggleSignInButton%28%21Prefab.accesstoken%29%3B%0A++++if+%28autoLogin+%26%26+%21Prefab.accesstoken%29+%7B%0A++++++++openWindow%28Prefab.loginurl%29%3B%0A++++%7D%0A%7D%3B%0A%0A%0Afunction+login%28%29+%7B%0A++++Prefab.Widgets.signInButton.%24element.click%28%29%3B%0A%7D%0APrefab.onReady+%3D+function%28%29+%7B%0A++++Prefab.login+%3D+login%3B%0A%7D%3B%0A%0APrefab.signInButtonClick+%3D+function%28%24event%2C+widget%29+%7B%0A++++openWindow%28Prefab.loginurl%29%3B%0A%7D%3B%0A%0APrefab.OAuthHandlerServiceGetAccessTokenonSuccess+%3D+function%28variable%2C+data%29+%7B%0A++++var+callbackParams%3B%0A++++if+%28data+%26%26+data.value%29+%7B%0A++++++++Prefab.onAccesstokenfetch%28null%2C+%7B%0A++++++++++++%27accesstoken%27%3A+Prefab.accesstoken%0A++++++++%7D%29%3B%0A++++++++Prefab.Widgets.signInButton.disabled+%3D+true%3B%0A++++++++toggleSignInButton%28false%29%3B%0A++++++++if+%28Prefab.loginsuccessmessage%29+%7B%0A++++++++++++Prefab.Actions.loginSuccess.invoke%28%29%3B%0A++++++++%7D%0A++++%7D+else+%7B%0A++++++++if+%28Prefab.isInsideIframe%29+%7B%0A++++++++++++callbackParams+%3D+JSON.stringify%28%7B%0A++++++++++++++++%27WMOAuthState%27%3A+true%0A++++++++++++%7D%29%3B%0A++++++++%7D+else+%7B%0A++++++++++++callbackParams+%3D+%22csrf8888%22%3B%0A++++++++%7D%0A++++++++Prefab.Variables.OAuthHandlerServiceGetLoginURL.setInput%28%27state%27%2C+callbackParams%29%3B%0A++++++++Prefab.Variables.OAuthHandlerServiceGetLoginURL.invoke%28%29%3B%0A++++%7D%0A%7D%3B",
  "styles" : ".wm-app+.google-login-btn.btn%2C+.wm-app+.google-login-btn.btn%3Ahover+%7B%0A++++background-color%3A+%23bc312c%3B%0A++++color%3A+%23fff%3B%0A%7D%0A.google-login-btn.btn+.btn-caption%3Anot%28%3Aempty%29+%7B%0A++++border-left%3A+0.5px+solid+rgba%28255%2C+255%2C+255%2C+0.34%29%3B%0A++++padding-left%3A+5px%3B%0A%7D",
  "variables" : "%7B%0A++%22loginSuccess%22+%3A+%7B%0A++++%22_id%22+%3A+%22wm-loginSuccess-wm.NotificationVariable-1487227160343%22%2C%0A++++%22name%22+%3A+%22loginSuccess%22%2C%0A++++%22owner%22+%3A+%22Page%22%2C%0A++++%22category%22+%3A+%22wm.NotificationVariable%22%2C%0A++++%22dataBinding%22+%3A+%5B+%7B%0A++++++%22target%22+%3A+%22content%22%2C%0A++++++%22value%22+%3A+%22inline%22%2C%0A++++++%22type%22+%3A+%22string%22%0A++++%7D%2C+%7B%0A++++++%22target%22+%3A+%22text%22%2C%0A++++++%22value%22+%3A+%22bind%3Aloginsuccessmessage%22%2C%0A++++++%22type%22+%3A+%22string%22%0A++++%7D%2C+%7B%0A++++++%22target%22+%3A+%22duration%22%2C%0A++++++%22value%22+%3A+%223000%22%2C%0A++++++%22type%22+%3A+%22number%22%0A++++%7D%2C+%7B%0A++++++%22target%22+%3A+%22class%22%2C%0A++++++%22value%22+%3A+%22Success%22%2C%0A++++++%22type%22+%3A+%22string%22%0A++++%7D%2C+%7B%0A++++++%22target%22+%3A+%22toasterPosition%22%2C%0A++++++%22value%22+%3A+%22bottom+right%22%2C%0A++++++%22type%22+%3A+%22string%22%0A++++%7D+%5D%2C%0A++++%22operation%22+%3A+%22toast%22%0A++%7D%2C%0A++%22OAuthHandlerServiceCallback%22+%3A+%7B%0A++++%22_id%22+%3A+%22wm-wm.ServiceVariable1431007930306%22%2C%0A++++%22name%22+%3A+%22OAuthHandlerServiceCallback%22%2C%0A++++%22owner%22+%3A+%22Page%22%2C%0A++++%22category%22+%3A+%22wm.ServiceVariable%22%2C%0A++++%22dataBinding%22+%3A+%5B+%5D%2C%0A++++%22type%22+%3A+%22.void%22%2C%0A++++%22service%22+%3A+%22OAuthHandlerService%22%2C%0A++++%22operation%22+%3A+%22callback%22%2C%0A++++%22operationId%22+%3A+%22OauthHandlerController_callback%22%2C%0A++++%22serviceType%22+%3A+%22JavaService%22%2C%0A++++%22dataSet%22+%3A+%7B%0A++++++%22dataValue%22+%3A+%22%22%0A++++%7D%2C%0A++++%22isList%22+%3A+false%2C%0A++++%22firstRow%22+%3A+0%2C%0A++++%22maxResults%22+%3A+20%2C%0A++++%22designMaxResults%22+%3A+10%2C%0A++++%22startUpdate%22+%3A+false%2C%0A++++%22autoUpdate%22+%3A+false%2C%0A++++%22inFlightBehavior%22+%3A+%22executeLast%22%2C%0A++++%22transformationRequired%22+%3A+false%2C%0A++++%22saveInPhonegap%22+%3A+false%2C%0A++++%22isDefault%22+%3A+true%2C%0A++++%22controller%22+%3A+%22OauthHandler%22%0A++%7D%2C%0A++%22OAuthHandlerServiceGetAccessToken%22+%3A+%7B%0A++++%22_id%22+%3A+%22wm-wm.ServiceVariable1431007930305%22%2C%0A++++%22name%22+%3A+%22OAuthHandlerServiceGetAccessToken%22%2C%0A++++%22owner%22+%3A+%22Page%22%2C%0A++++%22category%22+%3A+%22wm.ServiceVariable%22%2C%0A++++%22dataBinding%22+%3A+%5B+%5D%2C%0A++++%22type%22+%3A+%22java.lang.String%22%2C%0A++++%22service%22+%3A+%22OAuthHandlerService%22%2C%0A++++%22operation%22+%3A+%22getAccessToken%22%2C%0A++++%22operationId%22+%3A+%22OauthHandlerController_getAccessToken%22%2C%0A++++%22serviceType%22+%3A+%22JavaService%22%2C%0A++++%22dataSet%22+%3A+%7B%0A++++++%22dataValue%22+%3A+%22%22%0A++++%7D%2C%0A++++%22isList%22+%3A+false%2C%0A++++%22firstRow%22+%3A+0%2C%0A++++%22maxResults%22+%3A+20%2C%0A++++%22designMaxResults%22+%3A+10%2C%0A++++%22onSuccess%22+%3A+%22OAuthHandlerServiceGetAccessTokenonSuccess%28variable%2C+data%2C+options%29%22%2C%0A++++%22startUpdate%22+%3A+true%2C%0A++++%22autoUpdate%22+%3A+false%2C%0A++++%22inFlightBehavior%22+%3A+%22executeLast%22%2C%0A++++%22transformationRequired%22+%3A+false%2C%0A++++%22saveInPhonegap%22+%3A+false%2C%0A++++%22isDefault%22+%3A+true%2C%0A++++%22controller%22+%3A+%22OauthHandler%22%0A++%7D%2C%0A++%22OAuthHandlerServiceGetCallbackURL%22+%3A+%7B%0A++++%22_id%22+%3A+%22wm-wm.ServiceVariable1431007930302%22%2C%0A++++%22name%22+%3A+%22OAuthHandlerServiceGetCallbackURL%22%2C%0A++++%22owner%22+%3A+%22Page%22%2C%0A++++%22category%22+%3A+%22wm.ServiceVariable%22%2C%0A++++%22dataBinding%22+%3A+%5B+%5D%2C%0A++++%22type%22+%3A+%22java.lang.String%22%2C%0A++++%22service%22+%3A+%22OAuthHandlerService%22%2C%0A++++%22operation%22+%3A+%22getCallbackURL%22%2C%0A++++%22operationId%22+%3A+%22OauthHandlerController_getCallbackURL%22%2C%0A++++%22serviceType%22+%3A+%22JavaService%22%2C%0A++++%22dataSet%22+%3A+%7B%0A++++++%22dataValue%22+%3A+%22%22%0A++++%7D%2C%0A++++%22isList%22+%3A+false%2C%0A++++%22firstRow%22+%3A+0%2C%0A++++%22maxResults%22+%3A+20%2C%0A++++%22designMaxResults%22+%3A+10%2C%0A++++%22startUpdate%22+%3A+true%2C%0A++++%22autoUpdate%22+%3A+false%2C%0A++++%22inFlightBehavior%22+%3A+%22executeLast%22%2C%0A++++%22transformationRequired%22+%3A+false%2C%0A++++%22saveInPhonegap%22+%3A+false%2C%0A++++%22isDefault%22+%3A+true%2C%0A++++%22controller%22+%3A+%22OauthHandler%22%0A++%7D%2C%0A++%22OAuthHandlerServiceGetLoginURL%22+%3A+%7B%0A++++%22_id%22+%3A+%22wm-wm.ServiceVariable1431007930305%22%2C%0A++++%22name%22+%3A+%22OAuthHandlerServiceGetLoginURL%22%2C%0A++++%22owner%22+%3A+%22Page%22%2C%0A++++%22category%22+%3A+%22wm.ServiceVariable%22%2C%0A++++%22dataBinding%22+%3A+%5B+%5D%2C%0A++++%22type%22+%3A+%22string%22%2C%0A++++%22service%22+%3A+%22OAuthHandlerService%22%2C%0A++++%22operation%22+%3A+%22getLoginURL%22%2C%0A++++%22operationId%22+%3A+%22OauthHandlerController_getLoginURL%22%2C%0A++++%22operationType%22+%3A+%22get%22%2C%0A++++%22serviceType%22+%3A+%22JavaService%22%2C%0A++++%22dataSet%22+%3A+%7B%0A++++++%22dataValue%22+%3A+%22%22%0A++++%7D%2C%0A++++%22isList%22+%3A+false%2C%0A++++%22firstRow%22+%3A+0%2C%0A++++%22maxResults%22+%3A+20%2C%0A++++%22designMaxResults%22+%3A+10%2C%0A++++%22onSuccess%22+%3A+%22OAuthHandlerServiceGetLoginURLonSuccess%28variable%2C+data%2C+options%29%22%2C%0A++++%22startUpdate%22+%3A+false%2C%0A++++%22autoUpdate%22+%3A+false%2C%0A++++%22inFlightBehavior%22+%3A+%22executeLast%22%2C%0A++++%22transformationRequired%22+%3A+false%2C%0A++++%22saveInPhonegap%22+%3A+false%2C%0A++++%22isDefault%22+%3A+true%2C%0A++++%22controller%22+%3A+%22OauthHandler%22%0A++%7D%2C%0A++%22supportedLocale%22+%3A+%7B%0A++++%22_id%22+%3A+%22wm-wm.Variable1402640443182%22%2C%0A++++%22name%22+%3A+%22supportedLocale%22%2C%0A++++%22owner%22+%3A+%22Page%22%2C%0A++++%22category%22+%3A+%22wm.Variable%22%2C%0A++++%22dataBinding%22+%3A+%5B+%5D%2C%0A++++%22dataSet%22+%3A+%7B%0A++++++%22en%22+%3A+%22English%22%0A++++%7D%2C%0A++++%22type%22+%3A+%22string%22%2C%0A++++%22isList%22+%3A+false%2C%0A++++%22twoWayBinding%22+%3A+false%2C%0A++++%22saveInPhonegap%22+%3A+false%0A++%7D%0A%7D"
}